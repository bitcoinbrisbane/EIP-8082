<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="EIP-8078: Smart Contract Event Subscription with Gas-Bounded Execution - A mechanism for smart contracts to subscribe to and react to events emitted by other contracts">
    <meta name="keywords" content="Ethereum, EIP, EIP-8078, Smart Contracts, Event Subscription, Blockchain, Solidity">
    <meta name="author" content="EIP-8078 Contributors">
    <title>EIP-8078: Smart Contract Event Subscription with Gas-Bounded Execution</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            font-weight: 300;
        }

        .status-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            margin-top: 15px;
            font-size: 0.9em;
            font-weight: 500;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .section h3 {
            color: #764ba2;
            font-size: 1.4em;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .section p {
            margin-bottom: 15px;
            text-align: justify;
        }

        .section ul, .section ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }

        .section li {
            margin-bottom: 10px;
        }

        .highlight-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
            margin: 20px 0;
        }

        .code-block code {
            color: #f8f8f2;
        }

        .benefit-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }

        .benefit-card h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        footer {
            background: #2d2d2d;
            color: white;
            padding: 30px 40px;
            text-align: center;
        }

        footer a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .meta-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .meta-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .meta-item .label {
            font-weight: 600;
            color: #667eea;
            margin-bottom: 5px;
        }

        .meta-item .value {
            color: #666;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            header .subtitle {
                font-size: 1em;
            }

            .content {
                padding: 20px;
            }

            .section h2 {
                font-size: 1.5em;
            }

            .meta-info {
                grid-template-columns: 1fr;
            }
        }

        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .toc h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .toc ul {
            list-style: none;
            margin-left: 0;
        }

        .toc a {
            color: #333;
            text-decoration: none;
            display: block;
            padding: 8px 0;
            transition: color 0.3s;
        }

        .toc a:hover {
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>EIP-8078</h1>
            <p class="subtitle">Smart Contract Event Subscription with Gas-Bounded Execution</p>
            <span class="status-badge">Draft Proposal</span>
        </header>

        <div class="content">
            <div class="meta-info">
                <div class="meta-item">
                    <div class="label">EIP Number</div>
                    <div class="value">8078</div>
                </div>
                <div class="meta-item">
                    <div class="label">Category</div>
                    <div class="value">Core</div>
                </div>
                <div class="meta-item">
                    <div class="label">Status</div>
                    <div class="value">Draft</div>
                </div>
                <div class="meta-item">
                    <div class="label">Type</div>
                    <div class="value">Standards Track</div>
                </div>
            </div>

            <div class="toc">
                <h3>Table of Contents</h3>
                <ul>
                    <li><a href="#abstract">Abstract</a></li>
                    <li><a href="#motivation">Motivation</a></li>
                    <li><a href="#specification">Specification</a></li>
                    <li><a href="#rationale">Rationale</a></li>
                    <li><a href="#use-cases">Use Cases</a></li>
                    <li><a href="#benefits">Benefits</a></li>
                    <li><a href="#considerations">Security Considerations</a></li>
                </ul>
            </div>

            <div id="abstract" class="section">
                <h2>Abstract</h2>
                <p>
                    This proposal introduces a revolutionary mechanism that enables smart contracts to subscribe to and automatically react to events emitted by other contracts on the Ethereum blockchain. The key innovation is the implementation of gas-bounded execution, which ensures predictable costs and prevents runaway computation while eliminating the need for off-chain infrastructure.
                </p>
                <div class="highlight-box">
                    <strong>Key Innovation:</strong> EIP-8078 allows smart contracts to respond to events from other contracts autonomously, without requiring external servers, oracles, or off-chain monitoring systems.
                </div>
            </div>

            <div id="motivation" class="section">
                <h2>Motivation</h2>
                <p>
                    Current Ethereum smart contracts face significant limitations when it comes to inter-contract communication and event handling:
                </p>
                <ul>
                    <li><strong>Off-chain Dependency:</strong> Most event-driven interactions require off-chain infrastructure (indexers, bots, servers) to monitor events and trigger contract calls, adding complexity, cost, and centralization.</li>
                    <li><strong>Delayed Responses:</strong> Off-chain monitoring introduces latency between event emission and response, potentially missing time-sensitive opportunities.</li>
                    <li><strong>Infrastructure Costs:</strong> Maintaining reliable off-chain monitoring systems requires dedicated servers, maintenance, and operational expertise.</li>
                    <li><strong>Security Risks:</strong> Relying on off-chain components introduces additional attack vectors and single points of failure.</li>
                    <li><strong>Composability Issues:</strong> The lack of native event subscription prevents truly autonomous smart contract interactions and limits DeFi composability.</li>
                </ul>
                <p>
                    EIP-8078 addresses these challenges by bringing event subscription and reaction capabilities directly into the Ethereum protocol, enabling fully autonomous on-chain event-driven architectures.
                </p>
            </div>

            <div id="specification" class="section">
                <h2>Specification</h2>
                
                <h3>Core Components</h3>
                
                <h4>1. Event Subscription Interface</h4>
                <p>Smart contracts can register subscriptions to specific events emitted by other contracts:</p>
                <div class="code-block">
                    <code>function subscribeToEvent(
    address sourceContract,
    bytes32 eventSignature,
    uint256 maxGas,
    bytes calldata callbackData
) external returns (bytes32 subscriptionId);</code>
                </div>

                <h4>2. Gas-Bounded Execution</h4>
                <p>Each subscription includes a maximum gas limit to ensure predictable costs and prevent denial-of-service attacks:</p>
                <ul>
                    <li>Subscribers specify the maximum gas they're willing to pay for callback execution</li>
                    <li>If execution exceeds the gas limit, it fails gracefully without affecting the emitting transaction</li>
                    <li>Gas costs are deducted from the subscriber's account or a pre-funded balance</li>
                </ul>

                <h4>3. Callback Execution</h4>
                <p>When a subscribed event is emitted, the protocol automatically invokes the subscriber's callback function:</p>
                <div class="code-block">
                    <code>function onEventReceived(
    address sourceContract,
    bytes32 eventSignature,
    bytes calldata eventData,
    bytes calldata userData
) external returns (bool);</code>
                </div>

                <h4>4. Subscription Management</h4>
                <p>Contracts can manage their subscriptions with the following operations:</p>
                <ul>
                    <li><code>unsubscribeFromEvent(bytes32 subscriptionId)</code> - Cancel a subscription</li>
                    <li><code>updateSubscription(bytes32 subscriptionId, uint256 newMaxGas)</code> - Modify gas limits</li>
                    <li><code>pauseSubscription(bytes32 subscriptionId)</code> - Temporarily pause callbacks</li>
                    <li><code>resumeSubscription(bytes32 subscriptionId)</code> - Resume paused subscriptions</li>
                </ul>
            </div>

            <div id="rationale" class="section">
                <h2>Rationale</h2>
                
                <h3>Design Decisions</h3>
                
                <div class="benefit-card">
                    <h4>Gas-Bounded Execution</h4>
                    <p>Gas limits prevent malicious or poorly written callbacks from consuming excessive resources. This ensures that event emission remains predictable and that emitters aren't penalized for subscribers' mistakes.</p>
                </div>

                <div class="benefit-card">
                    <h4>Separate Execution Context</h4>
                    <p>Callbacks execute in a separate context from the emitting transaction. If a callback fails, it doesn't revert the original transaction, maintaining atomicity guarantees for the emitter.</p>
                </div>

                <div class="benefit-card">
                    <h4>Pre-funded Gas Pools</h4>
                    <p>Subscribers can pre-fund a gas pool for their subscriptions, ensuring callbacks can execute even if the subscriber contract has no ETH balance at callback time.</p>
                </div>

                <div class="benefit-card">
                    <h4>Event Signature Matching</h4>
                    <p>Using event signatures (instead of full event names) provides flexibility and reduces storage costs while maintaining specificity in subscriptions.</p>
                </div>
            </div>

            <div id="use-cases" class="section">
                <h2>Use Cases</h2>

                <h3>1. Automated Market Making</h3>
                <p>
                    DEX liquidity pools can automatically rebalance or adjust fees in response to price oracle updates, all without off-chain bots.
                </p>

                <h3>2. Cross-Protocol Interactions</h3>
                <p>
                    Lending protocols can automatically liquidate positions when collateral ratios change, responding immediately to price feed events.
                </p>

                <h3>3. DAO Governance</h3>
                <p>
                    Treasury management contracts can automatically execute approved proposals when voting completes, without requiring manual execution.
                </p>

                <h3>4. NFT Royalty Distribution</h3>
                <p>
                    Creator contracts can automatically distribute royalties when NFT sale events are emitted from marketplaces.
                </p>

                <h3>5. Insurance Claims</h3>
                <p>
                    Insurance contracts can automatically trigger claim processing when specific conditions are met and events are emitted by oracle contracts.
                </p>

                <h3>6. Gaming and Virtual Worlds</h3>
                <p>
                    In-game contracts can respond to player actions, item transfers, or achievement events without centralized game servers.
                </p>
            </div>

            <div id="benefits" class="section">
                <h2>Benefits</h2>

                <div class="benefit-card">
                    <h4>üöÄ Enhanced Composability</h4>
                    <p>Contracts can interact more seamlessly, creating complex systems of autonomous, interconnected smart contracts.</p>
                </div>

                <div class="benefit-card">
                    <h4>üí∞ Reduced Operational Costs</h4>
                    <p>Eliminates the need for expensive off-chain infrastructure, monitoring services, and dedicated servers.</p>
                </div>

                <div class="benefit-card">
                    <h4>‚ö° Improved Responsiveness</h4>
                    <p>Callbacks execute immediately within the same block as the event emission, enabling real-time reactions.</p>
                </div>

                <div class="benefit-card">
                    <h4>üîí Enhanced Security</h4>
                    <p>Removes off-chain components as potential attack vectors, keeping entire interaction logic on-chain and auditable.</p>
                </div>

                <div class="benefit-card">
                    <h4>üåê True Decentralization</h4>
                    <p>No reliance on centralized infrastructure or trusted third parties for event monitoring and reaction.</p>
                </div>

                <div class="benefit-card">
                    <h4>üéØ Predictable Costs</h4>
                    <p>Gas-bounded execution ensures that all costs are known upfront and can't exceed specified limits.</p>
                </div>
            </div>

            <div id="considerations" class="section">
                <h2>Security Considerations</h2>

                <h3>Denial of Service Prevention</h3>
                <p>
                    Gas limits prevent malicious subscribers from creating expensive callbacks that could slow down or halt event-emitting contracts.
                </p>

                <h3>Callback Failure Handling</h3>
                <p>
                    Failed callbacks don't affect the emitting transaction, ensuring that event emission remains reliable even if subscribers have bugs.
                </p>

                <h3>Reentrancy Protection</h3>
                <p>
                    Callbacks execute after the emitting transaction completes, preventing reentrancy attacks through the event subscription mechanism.
                </p>

                <h3>Gas Pool Management</h3>
                <p>
                    Subscribers must monitor and replenish their gas pools to ensure continued callback execution. Empty gas pools result in skipped callbacks without affecting emitters.
                </p>

                <h3>Subscription Spam</h3>
                <p>
                    To prevent subscription spam, contracts may implement allowlists or charge fees for subscription registration.
                </p>
            </div>

            <div class="section">
                <h2>Implementation Status</h2>
                <p>
                    This proposal is currently in draft status. Community feedback is welcome and encouraged. Implementation work is ongoing, with reference implementations being developed for major Ethereum clients.
                </p>
                <div class="highlight-box">
                    <strong>Contribute:</strong> We welcome feedback, suggestions, and contributions from the community. Please visit our GitHub repository to participate in discussions and development.
                </div>
            </div>
        </div>

        <footer>
            <p>&copy; 2025 EIP-8078 Contributors | 
            <a href="https://github.com/bitcoinbrisbane/EIP-8078" target="_blank">View on GitHub</a></p>
            <p style="margin-top: 10px; opacity: 0.8;">This is an Ethereum Improvement Proposal for community review and discussion.</p>
        </footer>
    </div>
</body>
</html>
